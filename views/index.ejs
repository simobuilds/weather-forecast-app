<%- include('partials/header') %>

<div class="weather-app-container">
    <div class="weather-header">
        <h1 class="notranslate"><i class="fas fa-cloud-sun"></i> Weather Comparison</h1>
        <p class="tagline">Search and compare up to three cities side-by-side</p>
    </div>

    <form class="weather-form mb-4" action="/" method="post">
        <div class="input-group">
            <span class="input-group-text"><i class="fas fa-search-location"></i></span>
            <input id="cityInput" type="text" name="cityName" class="form-control" placeholder="Enter city name..." required>
            <button type="submit" class="btn btn-primary">Add City</button>
        </div>
    </form>

    <% if (history && history.length > 0) { %>
        <div class="search-history mb-4 text-center">
            <small class="text-white-50">Recent: </small>
            <% history.forEach(city => { %>
                <span class="badge rounded-pill bg-light text-dark mx-1 notranslate" style="cursor: pointer;" onclick="submitHistory('<%= city %>')">
                    <%= city %>
                </span>
            <% }) %>
            <a href="/clear-history" class="text-white-50 ms-2"><i class="fas fa-trash-alt"></i></a>
        </div>
    <% } %>

    <div class="container">
        <div class="row justify-content-center g-4">
            <% if (cards.length === 0) { %>
                <p class="text-center text-white-50">Search for a city to start!</p>
            <% } %>
            <% cards.forEach(city => { %> 
                <%- include('partials/weatherCard', {city: city}) %>
            <% }) %>
        </div>
    </div>

    <%- include('partials/hourlyTimeline') %>

</div>

<%- include('partials/footer') %>